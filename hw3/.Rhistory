raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- column_names[i - 1]
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data |>
glimpse()
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (col_name in names(raw_data)) {
raw_data[[col_name]][1] <- col_name
}
raw_data |>
glimpse()
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (col_name in names(raw_data)) {
if (i %% 2 != 0 && i > 1)
raw_data[[col_name]][1] <- col_name
}
for (i in seq_along(raw_data)) {
if (i %% 2 != 0 && i > 1) {
col_name <- names(raw_data)[i - 1]
raw_data[[i]][1] <- col_name
}
}
raw_data |>
glimpse()
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (col_name in names(raw_data)) {
if (i %% 2 != 0 && i > 1)
raw_data[[col_name]][1] <- col_name
}
for (i in seq_along(raw_data)) {
if (i %% 2 != 0 && i > 1) {
col_name <- names(raw_data)[i - 1]
raw_data[[i]][1] <- col_name
}
}
raw_data |>
glimpse()
state_moe <- read.csv("state_network_moe.csv")
state_moe
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data |>
glimpse()
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- raw_data |>
pivot_longer(-State_arrived, names_to = "Type", values_to = "Value") |>
separate(Type, into = c("State", "Type"), sep = "_", extra = "merge") |>
pivot_wider(names_from = Type, values_from = Value)
raw_data |>
glimpse()
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- raw_data |>
pivot_longer(-State_arrived, names_to = "Type", values_to = "Value") |>
separate(Type, into = c("State", "Type"), sep = "_", extra = "merge") |>
pivot_wider(names_from = Type, values_from = Value)
raw_data
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- raw_data |>
mutate(across(everything(), ~ .[-1]))
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- as.data.frame(lapply(raw_data, function(x) x[-1]))
raw_data
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- as.data.frame(lapply(raw_data, function(x) x[-1]))
raw_data |>
glimpse()
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:O40")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- as.data.frame(lapply(raw_data, function(x) x[-1]))
raw_data <- raw_data |>
pivot_longer(-State_arrived, names_to = "Type", values_to = "Value") |>
separate(Type, into = c("State", "Type"), sep = "_", extra = "merge") |>
pivot_wider(names_from = Type, values_from = Value)
raw_data |>
glimpse()
state_moe <- read.csv("state_network_moe.csv")
state_moe
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:DG55")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- as.data.frame(lapply(raw_data, function(x) x[-1]))
raw_data <- raw_data |>
pivot_longer(-State_arrived, names_to = "Type", values_to = "Value") |>
separate(Type, into = c("State", "Type"), sep = "_", extra = "merge") |>
pivot_wider(names_from = Type, values_from = Value)
raw_data |>
glimpse()
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:DA55")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- as.data.frame(lapply(raw_data, function(x) x[-1]))
raw_data <- raw_data |>
pivot_longer(-State_arrived, names_to = "Type", values_to = "Value") |>
separate(Type, into = c("State", "Type"), sep = "_", extra = "merge") |>
pivot_wider(names_from = Type, values_from = Value)
raw_data |>
glimpse()
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:DA55")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- as.data.frame(lapply(raw_data, function(x) x[-1]))
raw_data <- raw_data |>
pivot_longer(-State_arrived, names_to = "Type", values_to = "Value") |>
separate(Type, into = c("State", "Type"), sep = "_", extra = "merge") |>
pivot_wider(names_from = Type, values_from = Value)
raw_data <- raw_data |>
rename(state_departed = State,
movement_estimate = estimate,
movement_more = moe)
raw_data |>
glimpse()
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:DA55")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- as.data.frame(lapply(raw_data, function(x) x[-1]))
raw_data <- raw_data |>
pivot_longer(-State_arrived, names_to = "Type", values_to = "Value") |>
separate(Type, into = c("State", "Type"), sep = "_", extra = "merge") |>
pivot_wider(names_from = Type, values_from = Value)
raw_data <- raw_data |>
rename(state_departed = State,
movement_estimate = estimate,
movement_more = moe)
raw_data |>
glimpse()
raw_data
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:DA55")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- as.data.frame(lapply(raw_data, function(x) x[-1]))
raw_data <- raw_data |>
pivot_longer(-State_arrived, names_to = "Type", values_to = "Value") |>
separate(Type, into = c("State", "Type"), sep = "_", extra = "merge") |>
pivot_wider(names_from = Type, values_from = Value)
raw_data <- raw_data |>
rename(state_departed = State,
movement_estimate = estimate,
movement_moe = moe)
raw_data$State_arrived <- gsub("\\.", " ", raw_data$State_arrived)
raw_data$state_departed <- gsub("\\.", " ", raw_data$state_departed)
raw_data |>
glimpse()
raw_data
state_moe <- read.csv("state_network_moe.csv")
state_moe
# check if the tables match
if(all(names(state_moe) == names(raw_data))) {
print("Column names match.")
} else {
print("Column names do not match.")
}
# Check if all rows are included
anti_join(state_moe, raw_data) |>
summarise(rows_not_in_raw_data = n())
state_moe <- read.csv("state_network_moe.csv")
state_moe
# check if the tables match
if(all(names(state_moe) == names(raw_data))) {
print("Column names match.")
} else {
print("Column names do not match.")
}
library(readxl)
raw_data <- read_excel("State_to_State_Migrations_Table_2019.xls",
range = "A2:DA55")
raw_data <- raw_data |>
rename(State_arrived = ...1)
column_names <- names(raw_data)
for (i in seq_along(column_names)) {
if (i %% 2 != 0 && i > 1) {
new_name <- paste0(column_names[i - 1], "_moe")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
for (i in seq_along(column_names)) {
if (i %% 2 == 0) {
new_name <- paste0(column_names[i], "_estimate")
raw_data <- raw_data |>
rename_with(~ new_name, .cols = i)
}
}
raw_data <- as.data.frame(lapply(raw_data, function(x) x[-1]))
raw_data <- raw_data |>
pivot_longer(-State_arrived, names_to = "Type", values_to = "Value") |>
separate(Type, into = c("State", "Type"), sep = "_", extra = "merge") |>
pivot_wider(names_from = Type, values_from = Value)
raw_data <- raw_data |>
rename(state_departed = State,
movement_estimate = estimate,
movement_moe = moe) |>
mutate(across(starts_with("movement_"), as.integer))
raw_data$State_arrived <- gsub("\\.", " ", raw_data$State_arrived)
raw_data$state_departed <- gsub("\\.", " ", raw_data$state_departed)
raw_data |>
glimpse()
raw_data
state_moe <- read.csv("state_network_moe.csv")
state_moe
# check if the tables match
if(all(names(state_moe) == names(raw_data))) {
print("Column names match.")
} else {
print("Column names do not match.")
}
# Check if all rows are included
anti_join(state_moe, raw_data) |>
summarise(rows_not_in_raw_data = n())
state_moe <- read.csv("state_network_moe.csv")
# check if the tables match
if(all(names(state_moe) == names(raw_data))) {
print("Column names match.")
} else {
print("Column names do not match.")
}
# Check if all rows are included
anti_join(state_moe, raw_data) |>
summarise(rows_not_in_raw_data = n())
